<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Employee Payroll Dashboard</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ’¼ Employee Payroll System</h1>
      <p>Manage employee records and calculate monthly payroll</p>
    </header>

    <nav>
      <a href="/" class="home">ğŸ  Dashboard</a>
      <a href="/add">â• Add New Employee</a>
    </nav>

    <main>
      <% if (employees.length === 0) { %>
        <div class="empty-state">
          <h2>No Employees Found</h2>
          <p>Get started by adding your first employee to the system.</p>
          <a href="/add" class="btn btn-edit" style="display: inline-block; padding: 1rem 2rem; font-size: 1rem;">Add Employee</a>
        </div>
      <% } else { %>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Employee Name</th>
                <th>Department</th>
                <th>Basic Salary</th>
                <th>Tax (12%)</th>
                <th>Net Salary</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <% employees.forEach(employee => { 
                const basicSalary = employee.basicSalary;
                const tax = basicSalary * 0.12;
                const netSalary = basicSalary - tax;
                
                // Determine badge class based on department
                let badgeClass = 'badge';
                const dept = employee.department.toLowerCase();
                if (dept.includes('engineering') || dept.includes('tech') || dept.includes('it')) {
                  badgeClass += ' badge-engineering';
                } else if (dept.includes('marketing')) {
                  badgeClass += ' badge-marketing';
                } else if (dept.includes('hr') || dept.includes('human')) {
                  badgeClass += ' badge-hr';
                } else if (dept.includes('sales')) {
                  badgeClass += ' badge-sales';
                } else if (dept.includes('finance')) {
                  badgeClass += ' badge-finance';
                }
              %>
                <tr>
                  <td><%= employee.name %></td>
                  <td><span class="<%= badgeClass %>"><%= employee.department %></span></td>
                  <td class="currency">$<%= basicSalary.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) %></td>
                  <td class="currency tax">$<%= tax.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) %></td>
                  <td class="currency">$<%= netSalary.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) %></td>
                  <td class="actions">
                    <a href="/edit/<%= employee.id %>" class="btn btn-edit">âœï¸ Edit</a>
                    <a href="/delete/<%= employee.id %>" class="btn btn-delete" onclick="return confirm('Are you sure you want to delete <%= employee.name %>?')">ğŸ—‘ï¸ Delete</a>
                  </td>
                </tr>
              <% }); %>
            </tbody>
          </table>
        </div>

        <div style="margin-top: 2rem; padding: 1.5rem; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 8px; border-left: 4px solid #3498db;">
          <h3 style="margin-bottom: 0.75rem; color: #2c3e50;">ğŸ“Š Summary</h3>
          <p style="color: #7f8c8d; font-size: 1rem;">
            <strong>Total Employees:</strong> <%= employees.length %> | 
            <strong>Total Monthly Payroll:</strong> $<%= employees.reduce((sum, emp) => sum + (emp.basicSalary - (emp.basicSalary * 0.12)), 0).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) %>
          </p>
        </div>
      <% } %>
    </main>

    <footer>
      <p>&copy; 2024 Employee Payroll System | Built with Node.js, Express & EJS</p>
    </footer>
  </div>
</body>
</html>
